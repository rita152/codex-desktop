---
inclusion: fileMatch
fileMatchPattern: ['src/**/*.tsx', 'src/**/*.ts', 'src/**/*.css']
---

# 前端代码验收标准

代码合并前必须满足以下所有检查项。

## 类型安全

- [ ] 无 `any` 类型使用
- [ ] 所有 props 有明确的 TypeScript 接口定义
- [ ] API 返回数据有类型定义
- [ ] `tsc` 编译无错误

## 组件规范

- [ ] 组件职责单一，不超过 200 行
- [ ] UI 组件无业务逻辑，无直接 API 调用
- [ ] 组件通过 props/回调通信，无直接引用其他组件状态
- [ ] 文件结构符合规范（index.tsx + 样式 + types.ts）

## 组件耦合检查

- [ ] UI 组件不依赖业务组件（依赖方向：UI ← 业务 ← 页面）
- [ ] 组件间无循环依赖
- [ ] 组件不直接访问其他组件的内部状态或 ref
- [ ] 共享状态通过 Context 或 props 传递，不通过全局变量
- [ ] 组件不依赖特定的父组件结构（可独立使用）
- [ ] 无跨层级组件直接通信（如 UI 组件直接调用页面级方法）

## 业务分离检查

- [ ] UI 组件不包含业务判断逻辑（如用户权限、业务状态判断）
- [ ] 业务规则封装在 hooks 或 utils 中，不散落在组件内
- [ ] 数据转换逻辑在 api 层或 hooks 中完成，组件只接收展示数据
- [ ] 表单验证规则与组件分离，定义在独立文件
- [ ] 业务常量（如状态枚举、配置项）集中管理，不硬编码在组件中

## 前后端分离

- [ ] 组件内无直接 `invoke()` 调用
- [ ] API 调用封装在 `api/` 层或 hooks 中
- [ ] 数据类型定义在 `types/` 目录
- [ ] 后端数据结构变化不需要修改 UI 组件（通过转换层隔离）

## 命名规范

- [ ] 组件文件名 PascalCase
- [ ] hooks 以 `use` 开头
- [ ] 事件处理函数 `handle` 开头
- [ ] 布尔变量 `is/has/can/should` 开头
- [ ] 常量 UPPER_SNAKE_CASE

## 样式规范

- [ ] 无硬编码颜色值（#xxx、rgb、颜色名）
- [ ] 所有颜色使用 `var(--color-xxx)` 变量
- [ ] 无全局样式污染

## 错误处理

- [ ] API 调用有错误处理
- [ ] 页面组件有 ErrorBoundary
- [ ] 错误信息对用户友好

## 性能

- [ ] 列表渲染有稳定的 `key`
- [ ] 无不必要的重渲染
- [ ] 大数据量有分页或虚拟滚动

## 代码质量

- [ ] 无 console.log（调试代码）
- [ ] 无注释掉的代码
- [ ] 导入顺序符合规范
- [ ] 无未使用的变量/导入

## 构建检查

```bash
# 必须全部通过
npm run build          # TypeScript 编译无错误
```
